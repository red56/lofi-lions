%h1 Listing languages

%table.table.table-striped
  %thead
    %tr
      %th Name
      %th Code
      - if current_user.is_administrator
        %th Projects & translators
        %th
  %tbody
    - @languages.each do |language|
      %tr
        %td= language.name
        %td= language.code
        - if current_user.is_administrator
          %td
            %ul
              - language.project_languages.each do |project_language|
                %li
                  = project_language.project.name
                  %ul
                    - project_language.users.sort_by(&:email).each do |user|
                      %li
                        %small= link_to user.email, edit_user_path(user)
          %td
            = link_to 'Edit language settings', edit_language_path(language), class: 'btn btn-default'
            -#= link_to 'Delete language', language, :method => :delete, :data => { :confirm => 'Are you sure?' },
            -#class: 'btn btn-warning'

%br

= link_to 'New Language', new_language_path, class: 'btn btn-primary'
